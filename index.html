<!DOCTYPE html>
<html>
<head>
  <title>Masjid Shabaab Daawah</title>
</head>
<body>

<h2>Audio Zilizopo</h2>

<div id="audioList"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBrgOTZN04zoRlpDzOgHFlK_5HvJW6pxD0",
  authDomain: "masjidshabaab.firebaseapp.com",
  databaseURL: "https://masjidshabaab-default-rtdb.firebaseio.com/",
  projectId: "masjidshabaab",
  storageBucket: "masjidshabaab.firebasestorage.app",
  messagingSenderId: "1069424481338",
  appId: "1:1069424481338:web:4eebe45e31ec3c24aad103"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

onValue(ref(db, "audios"), (snapshot) => {
  const data = snapshot.val();
  const container = document.getElementById("audioList");
  container.innerHTML = "";

  if(data) {
    for (let id in data) {
      container.innerHTML += `
        <p><strong>${data[id].title}</strong></p>
        <audio controls src="${data[id].url}"></audio><br>
        <a href="${data[id].url}" download>Download</a>
        <hr>
      `;
    }
  } else {
    container.innerHTML = "Hakuna audio bado.";
  }
});
</script>

</body>
</html>
